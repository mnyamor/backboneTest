<!Doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Backbonetutorial - router [hide your kids , hide your  wife, hide your husbands]</title>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.min.css">
  </head>
  <body>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    
    <script type="text/javascript">
      //dynamic routing
      //create a custom router class
      //Routes tell the app what to do
      var appRouter = Backbone.Router.extend({
        routes : {
          'posts/:id'      : 'getPost',
          'download/*path' : 'downloadFile',
          ':route/action'  : 'loadView',
          '*page'  : 'defaultRoute',
          //Backbone will try to match the route above first
        }, 
        execute : function(){

        }
      });
      //initiate the router
      var r = new appRouter();

      r.on('route:getPost', function(id) { 
      // Note the variable in the route definition being passed in here
         alert ('Get post number' + ' ' + id); 
      });

      r.on('route:downloadFile', function(path) {
        alert(path + 'second alert');
      });
      r.on('route:loadView', function(route, action) {
        var restfulPageUrl = this.restfulUrl + route + "route" ;
        console.log(route);
        console.log(action);
       // alert(route  + ' _ ' + ' ' + action); //dashboard_graph
      });
     //start backbone history - a neccessary step for bookmarkable URL
      Backbone.emulateHTTP = true;
      Backbone.emulateJSON = true;
      Backbone.history.start();
    </script>
  </body>
</html>